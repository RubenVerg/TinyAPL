---
glyph: '⊤'
pattern: 'r←[x]⊤y'
name: Encode
---

If `x` is not provided, it defaults to the scalar `2`.

If `x` is non-scalar, operates on vectors of `x` and scalars of `y`, the following recursive procedure is performed:

* let `b` be `⊇x` and `bs` be `¯1↓x`
* let `rem` be `b=0⍰y⍠b|y` and `div` be `b=0⍰0⍠⌊y÷b`
* `r` is `rem⍪⍨bs⊤div`

If `x` is scalar, operates on vectors of `y`, `x` must have magnitude greater than `1` and the following recursive procedure is performed:

* if `y=0`, then `r` is `⟨⟩`
* let `rem` be `x|y` and `div` be `⌊y÷x`
* let `rem1` be `x|div` and `div1` be `⌊div÷x`
* if `rem=rem1` and `div=div1` then `r` is `y`
* otherwise `r` is `rem⍪⍨x⊤div`

with the difference that encoding `0` returns `⟨0⟩` instead of `⟨⟩`.

Supports the `tolerance` extra argument for the comparisons.