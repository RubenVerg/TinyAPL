---
glyph: '⎕FFI'
pattern: 'r←[x] ⎕FFI y'
name: FFI
category: FFI
---

`r` is a wrap containing the function described by `y` in the dynamic library at path `x`, which defaults to the C standard library if not provided. `y` is a vector of at least two strings. The first element of `y` is the return type of the function; the second element is the name of the symbol; the elements after the second are the arguments of the function. The resulting wrapped function must be called monadically with a vector of arguments.

## Types

* `void`: C `void`
* `u8`: C `uint8_t`
* `u16`: C `uint16_t`
* `u32`: C `uint32_t`
* `u64`: C `uint64_t` **see note**
* `i8`: C `int8_t`
* `i16`: C `int16_t`
* `i32`: C `int32_t`
* `i64`: C `int64_t` **see note**
* `uint`: C `unsigned int`
* `int`: C `int`
* `ulong`: C `unsigned long`
* `long`: C `long`
* `usize`: C `size_t` **see note**
* `f32`: C `float`
* `f64`: C `double`
* `c8`: C `char8_t`
* `c16`: C `char16_t`
* `c32`: C `char32_t`
* `uchar`: C `unsigned char`
* `char`: C `char`
* `wchar`: C `wchar_t`
* `str`: C `char*`
* `[]x`: C `x[]`
* `*x`: C `x*`

> **Note**: 64-bit integers don't necessarily fit in the 64-bit floating point type that TinyAPL uses. You won't be able to accurately pass nor be returned values with absolute value greater than `9007199254740991`.

## Pointers

Functions that take and return pointers use a special pointer struct with the following members:

* `address`: a number containing the address pointed to
* `size`: the size in bytes of the datatype pointed to
* `Peek`: value at offset `⍵`
* `PeekB`: value at offset `⍵` (in bytes)
* `PeekL`: `⍵` values, at offset `⍺`, which defaults to `0`
* `PeekE`: monadically read until zero value is found, starting at offset `⍵`; dyadically read until value `⍵` is found, starting at offset `⍺`
* `Poke`: write value `⍵` at offset `⍺`, which defaults to `0`
* `PokeB`: write value `⍵` at offset `⍺` (in bytes)
* `PokeA`: write values from vector `⍵` starting at offset `⍺`, which defaults to `0`
* `PokeE`: write values from vector `⍵` terminated by zero if monadic and `⍺` if dyadic
* `Cast`: return a pointer to the same address but with a different datatype `⍵`
* `+`: offset a pointer by an integer
* `AddB`: offset a pointer by an integer (in bytes)
* `-`: offset a pointer by an integer, or find the distance between two pointers
* `SubB`: offset a pointer by an integer (in bytes), or find the distance (in bytes) between two pointers
* `⧺`: increment a pointer by one byte
* `ⵧ`: decrement a pointer by one byte
* `×`: is the pointer not null?
